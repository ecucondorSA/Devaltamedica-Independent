# ğŸš€ AltaMedica API Server - GuÃ­a de Desarrollo

## ğŸ—ï¸ Arquitectura del Servidor

### ğŸ“ Estructura de Directorios
- **`src/app/`** - LÃ³gica de aplicaciÃ³n y middleware
- **`src/auth/`** - AutenticaciÃ³n y autorizaciÃ³n
- **`src/components/`** - Componentes del servidor
- **`src/database/`** - ConfiguraciÃ³n de base de datos
- **`src/monitoring/`** - Monitoreo y mÃ©tricas

### ğŸ” Sistema de AutenticaciÃ³n
- **JWT tokens** para sesiones de usuario
- **Middleware de autorizaciÃ³n** por roles
- **Rate limiting** por IP y usuario
- **Audit logging** para accesos mÃ©dicos

### ğŸ—„ï¸ Base de Datos
- **Prisma ORM** para operaciones de BD
- **PostgreSQL** como base principal
- **Redis** para cachÃ© y sesiones
- **Migrations** versionadas y documentadas

## ğŸ“¡ Endpoints Principales

### ğŸ‘¥ Usuarios
- `POST /api/auth/login` - AutenticaciÃ³n
- `POST /api/auth/register` - Registro
- `GET /api/users/profile` - Perfil del usuario
- `PUT /api/users/profile` - Actualizar perfil

### ğŸ¥ MÃ©dicos
- `GET /api/doctors` - Listar mÃ©dicos
- `GET /api/doctors/:id` - Obtener mÃ©dico
- `POST /api/doctors/availability` - Disponibilidad
- `GET /api/doctors/:id/appointments` - Citas del mÃ©dico

### ğŸ‘¨â€âš•ï¸ Pacientes
- `GET /api/patients` - Listar pacientes
- `GET /api/patients/:id` - Obtener paciente
- `POST /api/appointments` - Crear cita
- `GET /api/appointments/:id` - Obtener cita

### ğŸ’¼ Empresas
- `GET /api/companies` - Listar empresas
- `POST /api/companies` - Crear empresa
- `GET /api/companies/:id/services` - Servicios de la empresa

## ğŸ”’ Seguridad y Compliance

### HIPAA Compliance
- **EncriptaciÃ³n AES-256** para datos mÃ©dicos
- **Logging de auditorÃ­a** para accesos
- **Timeouts de sesiÃ³n** automÃ¡ticos
- **ValidaciÃ³n de permisos** por recurso

### Middleware de Seguridad
- **Helmet** para headers de seguridad
- **CORS** configurado por dominio
- **SanitizaciÃ³n** de inputs
- **ValidaciÃ³n** con esquemas (Zod)

## ğŸ§ª Testing

### Tests Unitarios
- **Vitest** como framework principal
- **Mocks** para dependencias externas
- **Cobertura** mÃ­nima del 85%

### Tests de IntegraciÃ³n
- **Supertest** para testing de APIs
- **Base de datos** de testing separada
- **Cleanup** automÃ¡tico entre tests

## ğŸ“Š Monitoreo

### MÃ©tricas
- **Prometheus** para mÃ©tricas del sistema
- **Grafana** para visualizaciÃ³n
- **Sentry** para error tracking
- **Health checks** automÃ¡ticos
description:
globs:
alwaysApply: false
---
