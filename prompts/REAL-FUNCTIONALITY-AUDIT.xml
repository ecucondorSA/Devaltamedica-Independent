<?xml version="1.0" encoding="UTF-8"?>
<domain_context>
  <reasoning_configuration>
    <reasoning_effort>high</reasoning_effort>
    <verbosity>medium</verbosity>
    <tool_budget>unlimited</tool_budget>
  </reasoning_configuration>
  
  <context_gathering>
    <goal>AuditorÃ­a REAL de funcionalidad - NO teorÃ­a</goal>
    <method>
      - Probar APLICACIONES REALES, no solo leer cÃ³digo
      - Identificar errores FUNCIONALES, no solo de estilo
      - Priorizar lo que NO FUNCIONA sobre lo que estÃ¡ "bien documentado"
      - Enfocarse en funcionalidad del usuario final
    </method>
    <early_stop>Cuando identifiques 3+ errores crÃ­ticos que impiden el uso</early_stop>
  </context_gathering>
  
  <implementation_patterns>
    <audit_priority>
      1. FUNCIONALIDAD BÃSICA - Â¿Se puede usar la app?
      2. BUILD SYSTEM - Â¿Compila sin errores?
      3. DEPENDENCIAS - Â¿Se resuelven correctamente?
      4. FEATURES - Â¿Funcionan las caracterÃ­sticas principales?
      5. COMPLIANCE - Solo despuÃ©s de que todo lo anterior funcione
    </audit_priority>
    
    <testing_approach>
      - Ejecutar comandos reales (build, dev, test)
      - Verificar errores en consola y logs
      - Probar funcionalidades crÃ­ticas del usuario
      - Identificar bloqueos reales, no teÃ³ricos
    </testing_approach>
  </implementation_patterns>
  
  <tool_preambles>
    <before_operation>
      ğŸ¯ PLAN: [DiagnÃ³stico] â†’ [ReparaciÃ³n] â†’ [ValidaciÃ³n] â†’ [DocumentaciÃ³n]
    </before_operation>
    <progress_update>
      âœ… Done: [Previous]
      ğŸ”„ Current: [Now]
      ğŸš¨ Critical: [Blockers found]
    </progress_update>
  </tool_preambles>
  
  <medical_persistence>
    <emergency_mode>
      reasoning_effort: high
      confirmation: never
      tool_budget: unlimited
      priority: FUNCTIONALITY_OVER_COMPLIANCE
    </emergency_mode>
  </medical_persistence>
  
  <audit_checklist>
    <critical_functionality>
      - [ ] Â¿La aplicaciÃ³n se levanta sin errores 500?
      - [ ] Â¿El sistema de autenticaciÃ³n funciona?
      - [ ] Â¿Se puede navegar entre rutas principales?
      - [ ] Â¿Los componentes se renderizan correctamente?
      - [ ] Â¿No hay errores de hooks en consola?
    </critical_functionality>
    
    <build_system>
      - [ ] Â¿pnpm run build funciona en todas las apps?
      - [ ] Â¿No hay errores de TypeScript?
      - [ ] Â¿Los paquetes se compilan correctamente?
      - [ ] Â¿No hay warnings de configuraciÃ³n?
      - [ ] Â¿Los exports de package.json estÃ¡n correctos?
    </build_system>
    
    <dependencies>
      - [ ] Â¿Todas las dependencias se resuelven?
      - [ ] Â¿No hay conflictos de versiones?
      - [ ] Â¿Los imports funcionan correctamente?
      - [ ] Â¿Los paquetes se pueden usar?
      - [ ] Â¿No hay errores de mÃ³dulos?
    </dependencies>
  </audit_checklist>
  
  <response_format>
    <gap_report>
      {
        "id": "GAP-REAL-XXX",
        "dominio": "core_tecnico",
        "titulo": "DESCRIPCIÃ“N DEL PROBLEMA REAL",
        "prioridad": "P0-CRÃTICO",
        "tipo": "bug_critico|build_system|dependencies",
        "riesgo": "CRÃTICO",
        "justificacion": "Por quÃ© esto impide usar la plataforma",
        "sintomas": ["Error especÃ­fico 1", "Error especÃ­fico 2"],
        "causa_raiz": "Causa tÃ©cnica identificada",
        "aceptacion": ["Criterio 1", "Criterio 2"],
        "tiempo_estimado": "X horas",
        "impacto_usuario": "X% - DescripciÃ³n del impacto"
      }
    </gap_report>
    
    <action_plan>
      ## ğŸš¨ PLAN DE ACCIÃ“N INMEDIATO
      
      ### PASO 1: DIAGNÃ“STICO (X min)
      - [ ] Verificar estado actual
      - [ ] Identificar errores crÃ­ticos
      - [ ] Priorizar por impacto
      
      ### PASO 2: REPARACIÃ“N (X min)
      - [ ] Corregir problema 1
      - [ ] Corregir problema 2
      - [ ] Validar funcionamiento
      
      ### PASO 3: VALIDACIÃ“N (X min)
      - [ ] Testear funcionalidad
      - [ ] Verificar que no hay regresiones
      - [ ] Confirmar que funciona
    </action_plan>
  </response_format>
  
  <stop_conditions>
    <success>
      - Todas las aplicaciones funcionan sin errores crÃ­ticos
      - El sistema de build funciona correctamente
      - Las dependencias se resuelven sin problemas
      - Se puede usar la plataforma para su propÃ³sito principal
    </success>
    
    <failure>
      - MÃ¡s de 5 errores crÃ­ticos sin resolver
      - Imposible hacer funcionar ninguna aplicaciÃ³n
      - Sistema de build completamente corrupto
      - Dependencias irresolubles
    </failure>
  </stop_conditions>
  
  <quality_standards>
    <functional_priority>
      - FUNCIONALIDAD > COMPLIANCE
      - USABILIDAD > PERFECCIÃ“N
      - FUNCIONAMIENTO > DOCUMENTACIÃ“N
      - REAL > TEÃ“RICO
    </functional_priority>
    
    <documentation_requirements>
      - Actualizar auditoria-gaps-mvp.json con GAPs reales
      - Documentar problemas funcionales encontrados
      - Registrar tiempo real de reparaciÃ³n
      - Mantener CLAUDE.md actualizado
    </documentation_requirements>
  </quality_standards>
</domain_context>
