# @AltaMedica/Hooks - Glosario Alfab√©tico

## üè∑Ô∏è Leyenda de Badges

### Runtime Compatibility
- üíª **Client-only** - Solo funciona en browser (usa DOM/window)
- üè∑Ô∏è **Edge-safe** - Compatible con Edge Runtime
- üîí **Server-only** - Solo Node.js (usa fs/crypto/etc)
- ‚öõÔ∏è **SSR-safe** - Compatible con Server-Side Rendering

### Estabilidad
- üìä **Stable** - API estable, no cambiar√°
- üîÑ **Beta** - Puede cambiar en menores
- üöß **Experimental** - Cambios frecuentes
- ‚ö†Ô∏è **Deprecated** - Obsoleto, migrar

### Categor√≠a
- üè• **Medical** - Hooks m√©dicos/HIPAA
- üîê **Auth** - Autenticaci√≥n/seguridad
- üé® **UI** - Interface/UX
- üì° **Data** - Fetching/estado
- ‚ö° **Performance** - Optimizaci√≥n
- üîÑ **Lifecycle** - Ciclo de vida

## üìö Hooks por Categor√≠a

### üè• Hooks M√©dicos (HIPAA Compliant)

#### @usePatients
```typescript
import { usePatients } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üè• **Medical**
- Hook para gesti√≥n de pacientes
- Incluye paginaci√≥n, b√∫squeda y filtros
- ‚ö†Ô∏è **Requiere autenticaci√≥n m√©dica**

#### @useMedicalRecords
```typescript
import { useMedicalRecords } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üè• **Medical** | üîí **HIPAA**
- Acceso a historiales m√©dicos
- Encriptaci√≥n autom√°tica de datos sensibles
- Audit logging incluido

#### @useAppointments
```typescript
import { useAppointments } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üè• **Medical**
- Gesti√≥n de citas m√©dicas
- Real-time updates v√≠a WebSocket
- Sincronizaci√≥n con calendario

#### @usePrescriptions
```typescript
import { usePrescriptions } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üè• **Medical** | üîí **HIPAA**
- Manejo de prescripciones m√©dicas
- Validaci√≥n con base de medicamentos
- Integraci√≥n con farmacias

#### @useVitalSigns
```typescript
import { useVitalSigns } from '@altamedica/hooks';
```
- üíª **Client-only** | üîÑ **Beta** | üè• **Medical**
- Monitoreo de signos vitales
- Gr√°ficas en tiempo real
- Alertas autom√°ticas

#### @useMedicalAI
```typescript
import { useMedicalAI } from '@altamedica/hooks';
```
- üíª **Client-only** | üöß **Experimental** | üè• **Medical**
- Diagn√≥stico asistido por IA
- Predicciones basadas en ML
- ‚ö†Ô∏è **Solo uso asistencial, no diagn√≥stico final**

### üîê Hooks de Autenticaci√≥n

#### @useAuth
```typescript
import { useAuth } from '@altamedica/hooks';
```
- üè∑Ô∏è **Edge-safe** | üìä **Stable** | üîê **Auth**
- Hook principal de autenticaci√≥n
- Compatible con SSR
- Auto-refresh de tokens

#### @usePermissions
```typescript
import { usePermissions } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üîê **Auth**
- Control de permisos basado en roles
- Cache de permisos
- Validaci√≥n en tiempo real

#### @useSession
```typescript
import { useSession } from '@altamedica/hooks';
```
- üè∑Ô∏è **Edge-safe** | üìä **Stable** | üîê **Auth**
- Gesti√≥n de sesi√≥n de usuario
- Auto logout por inactividad
- Persistencia segura

### üé® Hooks de UI/UX

#### @useTheme
```typescript
import { useTheme } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üé® **UI**
- Gesti√≥n de tema (light/dark/auto)
- Persistencia en localStorage
- Sistema de dise√±o consistente

#### @useToast
```typescript
import { useToast } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üé® **UI**
- Sistema de notificaciones toast
- Queue autom√°tico
- Accesibilidad ARIA

#### @useModal
```typescript
import { useModal } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üé® **UI**
- Control de modales
- Focus trap incluido
- Escape key handling

#### @useAccessibility
```typescript
import { useAccessibility } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üé® **UI**
- Utilidades de accesibilidad
- Screen reader announcements
- Keyboard navigation

### üì° Hooks de Data/Estado

#### @useAsync
```typescript
import { useAsync } from '@altamedica/hooks';
```
- üè∑Ô∏è **Edge-safe** | üìä **Stable** | üì° **Data**
- Manejo de operaciones as√≠ncronas
- Estados: loading, error, data
- Cancelaci√≥n autom√°tica

#### @useDebounce
```typescript
import { useDebounce } from '@altamedica/hooks';
```
- üè∑Ô∏è **Edge-safe** | üìä **Stable** | ‚ö° **Performance**
- Debounce de valores
- Configurable delay
- Cancelaci√≥n manual

#### @useLocalStorage
```typescript
import { useLocalStorage } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üì° **Data**
- Sincronizaci√≥n con localStorage
- Serializaci√≥n autom√°tica
- SSR-safe con fallback

#### @useMediaQuery
```typescript
import { useMediaQuery } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üé® **UI**
- Responsive design hooks
- SSR compatible
- Performance optimized

### üîÑ Hooks de WebSocket/Real-time

#### @useWebSocket
```typescript
import { useWebSocket } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üì° **Data**
- Conexi√≥n WebSocket gestionada
- Auto-reconnect
- Message queue

#### @useNotifications
```typescript
import { useNotifications } from '@altamedica/hooks';
```
- üíª **Client-only** | üìä **Stable** | üì° **Data**
- Push notifications
- Real-time updates
- Permission handling

#### @useRealTimeUpdates
```typescript
import { useRealTimeUpdates } from '@altamedica/hooks';
```
- üíª **Client-only** | üîÑ **Beta** | üì° **Data**
- Sincronizaci√≥n en tiempo real
- Optimistic updates
- Conflict resolution

## üö® Client-only vs Server-only vs Edge-safe

### üíª Client-only Hooks
Estos hooks **SOLO** funcionan en el browser:
```typescript
// ‚ùå NO funcionar√° en servidor/Edge Runtime
const theme = useTheme(); // Error: window is not defined

// ‚úÖ Soluci√≥n: Usar con conditional rendering
const MyComponent = () => {
  const [mounted, setMounted] = useState(false);
  
  useEffect(() => {
    setMounted(true);
  }, []);
  
  if (!mounted) return null;
  
  const theme = useTheme(); // Ahora es seguro
  return <div>Theme: {theme}</div>;
};
```

### üè∑Ô∏è Edge-safe Hooks
Funcionan en Edge Runtime (Vercel Edge, Cloudflare Workers):
```typescript
// ‚úÖ Estos funcionan en cualquier runtime
const { user } = useAuth();
const debouncedValue = useDebounce(value, 500);
const { data, loading } = useAsync(fetchData);
```

### ‚öõÔ∏è SSR Considerations
Para Server-Side Rendering con Next.js:
```typescript
// ‚ùå PROBLEMA: useLocalStorage en SSR
const [value] = useLocalStorage('key', 'default'); // Error en servidor

// ‚úÖ SOLUCI√ìN: Usar fallback para SSR
const [value] = useLocalStorage('key', 'default', {
  ssr: true, // Retorna default en servidor
});
```

## üîß Patrones de Import Recomendados

### Import Espec√≠fico (Recomendado)
```typescript
// ‚úÖ Tree-shaking optimizado
import { useAuth, usePatients } from '@altamedica/hooks';
```

### Import por Categor√≠a
```typescript
// ‚úÖ Organizado por dominio
import { useAuth, usePermissions } from '@altamedica/hooks/auth';
import { usePatients, useMedicalRecords } from '@altamedica/hooks/medical';
import { useTheme, useToast } from '@altamedica/hooks/ui';
```

### Import con Type Safety
```typescript
// ‚úÖ Types seguros
import { usePatients } from '@altamedica/hooks';
import type { Patient, PatientsFilter } from '@altamedica/types';

const { data: patients } = usePatients<Patient>({
  filter: { status: 'active' } as PatientsFilter
});
```

## üêõ Errores Comunes y Soluciones

### ‚ö†Ô∏è Error: Exhaustive deps (ESLint)
```typescript
// ‚ùå PROBLEMA: Dependencia faltante
useEffect(() => {
  fetchData(userId);
}, []); // ESLint: React Hook useEffect has a missing dependency

// ‚úÖ SOLUCI√ìN 1: A√±adir dependencia
useEffect(() => {
  fetchData(userId);
}, [userId]);

// ‚úÖ SOLUCI√ìN 2: useCallback si la funci√≥n cambia
const stableFetch = useCallback(() => {
  fetchData(userId);
}, [userId]);

useEffect(() => {
  stableFetch();
}, [stableFetch]);
```

### ‚ö†Ô∏è Error: Rules of Hooks violation
```typescript
// ‚ùå PROBLEMA: Hook condicional
if (isLoggedIn) {
  const user = useAuth(); // Error: Hook called conditionally
}

// ‚úÖ SOLUCI√ìN: Hooks siempre al top level
const { user } = useAuth();
if (isLoggedIn && user) {
  // Usar user aqu√≠
}
```

### ‚ö†Ô∏è Error: Infinite re-renders
```typescript
// ‚ùå PROBLEMA: setState en render
const Component = () => {
  const [count, setCount] = useState(0);
  setCount(count + 1); // Infinite loop!
  
// ‚úÖ SOLUCI√ìN: setState en efectos o handlers
const Component = () => {
  const [count, setCount] = useState(0);
  
  useEffect(() => {
    setCount(c => c + 1);
  }, []); // Solo una vez
  
  // O en event handler
  const increment = () => setCount(c => c + 1);
```

### ‚ö†Ô∏è Error: Memory leaks con subscriptions
```typescript
// ‚ùå PROBLEMA: No cleanup en useEffect
useEffect(() => {
  const subscription = api.subscribe(handleUpdate);
  // Sin cleanup = memory leak
}, []);

// ‚úÖ SOLUCI√ìN: Return cleanup function
useEffect(() => {
  const subscription = api.subscribe(handleUpdate);
  return () => subscription.unsubscribe(); // Cleanup
}, []);
```

## üìã Recetas Comunes

### Fetch con Loading y Error
```typescript
const useFetchData = (url: string) => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  
  useEffect(() => {
    const abortController = new AbortController();
    
    const fetchData = async () => {
      try {
        setLoading(true);
        const response = await fetch(url, {
          signal: abortController.signal
        });
        if (!response.ok) throw new Error('Failed to fetch');
        const data = await response.json();
        setData(data);
      } catch (err) {
        if (err.name !== 'AbortError') {
          setError(err.message);
        }
      } finally {
        setLoading(false);
      }
    };
    
    fetchData();
    
    return () => abortController.abort();
  }, [url]);
  
  return { data, loading, error };
};
```

### Debounced Search
```typescript
const SearchComponent = () => {
  const [query, setQuery] = useState('');
  const debouncedQuery = useDebounce(query, 500);
  
  const { data: results } = useAsync(
    () => searchAPI(debouncedQuery),
    [debouncedQuery]
  );
  
  return (
    <div>
      <input 
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="Search..."
      />
      {results && <Results data={results} />}
    </div>
  );
};
```

### Real-time Medical Monitoring
```typescript
const VitalSignsMonitor = ({ patientId }) => {
  const { data: vitalSigns, subscribe } = useVitalSigns(patientId);
  const [alerts, setAlerts] = useState([]);
  
  useEffect(() => {
    const unsubscribe = subscribe((newVitals) => {
      // Check for critical values
      if (newVitals.heartRate > 120 || newVitals.heartRate < 50) {
        setAlerts(prev => [...prev, {
          type: 'critical',
          message: `Heart rate: ${newVitals.heartRate}`,
          timestamp: new Date()
        }]);
      }
    });
    
    return unsubscribe;
  }, [patientId, subscribe]);
  
  return (
    <div>
      <VitalSignsChart data={vitalSigns} />
      <AlertsList alerts={alerts} />
    </div>
  );
};
```

## üîí Consideraciones de Seguridad HIPAA

Para hooks que manejan datos m√©dicos:

```typescript
// ‚úÖ SIEMPRE encriptar datos sensibles
const { data: records } = useMedicalRecords(patientId, {
  encryption: true,
  auditLog: true,
  sanitizeForLogs: true
});

// ‚úÖ Limpiar datos en unmount
useEffect(() => {
  return () => {
    // Limpiar datos sensibles de memoria
    clearSensitiveData();
  };
}, []);

// ‚úÖ No exponer datos en DevTools
if (process.env.NODE_ENV === 'production') {
  Object.freeze(medicalData);
}
```

## üìä Testing Hooks

### Con React Testing Library
```typescript
import { renderHook, act } from '@testing-library/react-hooks';
import { useCounter } from '@altamedica/hooks';

describe('useCounter', () => {
  it('should increment counter', () => {
    const { result } = renderHook(() => useCounter());
    
    act(() => {
      result.current.increment();
    });
    
    expect(result.current.count).toBe(1);
  });
});
```

### Mock de Hooks en Tests
```typescript
// __mocks__/@altamedica/hooks.ts
export const useAuth = jest.fn(() => ({
  user: { id: '123', name: 'Test User' },
  isAuthenticated: true
}));

export const usePatients = jest.fn(() => ({
  data: mockPatients,
  loading: false,
  error: null
}));
```

## üöÄ Performance Best Practices

1. **Memoizaci√≥n**: Usar `useMemo` y `useCallback` apropiadamente
2. **Lazy Loading**: Cargar hooks pesados solo cuando necesario
3. **Suspense**: Usar React.Suspense para loading states
4. **Code Splitting**: Separar hooks por rutas/features

```typescript
// ‚úÖ Lazy load de hooks pesados
const MedicalDashboard = lazy(() => 
  import('./MedicalDashboard').then(module => ({
    default: module.MedicalDashboard
  }))
);
```

---

**üìö Total de Hooks Disponibles**: 80+  
**üè• Hooks M√©dicos**: 25+  
**üé® Hooks de UI**: 20+  
**üì° Hooks de Data**: 35+  

**√öltima actualizaci√≥n**: 2025-08-29  
**Versi√≥n del package**: 1.0.0